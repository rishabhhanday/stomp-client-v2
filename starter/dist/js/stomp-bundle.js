!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t,n){(function(){var e,n,r,o,i={}.hasOwnProperty,s=[].slice;e={LF:"\n",NULL:"\0"},r=function(){var t;function n(e,t,n){this.command=e,this.headers=null!=t?t:{},this.body=null!=n?n:""}return n.prototype.toString=function(){var t,r,o,s,c;for(r in t=[this.command],(o=!1===this.headers["content-length"])&&delete this.headers["content-length"],c=this.headers)i.call(c,r)&&(s=c[r],t.push(r+":"+s));return this.body&&!o&&t.push("content-length:"+n.sizeOfUTF8(this.body)),t.push(e.LF+this.body),t.join(e.LF)},n.sizeOfUTF8=function(e){return e?encodeURI(e).match(/%..|./g).length:0},t=function(t){var r,o,i,s,c,u,a,l,d,f,p,h,b,g,m,y,v;for(s=t.search(RegExp(""+e.LF+e.LF)),i=(c=t.substring(0,s).split(e.LF)).shift(),u={},h=function(e){return e.replace(/^\s+|\s+$/g,"")},b=0,m=(y=c.reverse()).length;b<m;b++)l=(f=y[b]).indexOf(":"),u[h(f.substring(0,l))]=h(f.substring(l+1));if(r="",p=s+2,u["content-length"])d=parseInt(u["content-length"]),r=(""+t).substring(p,p+d);else for(o=null,a=g=p,v=t.length;(p<=v?g<v:g>v)&&(o=t.charAt(a))!==e.NULL;a=p<=v?++g:--g)r+=o;return new n(i,u,r)},n.unmarshall=function(n){var r;return function(){var o,i,s,c;for(c=[],o=0,i=(s=n.split(RegExp(""+e.NULL+e.LF+"*"))).length;o<i;o++)(null!=(r=s[o])?r.length:void 0)>0&&c.push(t(r));return c}()},n.marshall=function(t,r,o){return new n(t,r,o).toString()+e.NULL},n}(),n=function(){var t;function n(e){this.ws=e,this.ws.binaryType="arraybuffer",this.counter=0,this.connected=!1,this.heartbeat={outgoing:1e4,incoming:1e4},this.maxWebSocketFrameSize=16384,this.subscriptions={}}return n.prototype.debug=function(e){var t;return"undefined"!=typeof window&&null!==window&&null!=(t=window.console)?t.log(e):void 0},t=function(){return Date.now?Date.now():(new Date).valueOf},n.prototype._transmit=function(e,t,n){var o;for(o=r.marshall(e,t,n),"function"==typeof this.debug&&this.debug(">>> "+o);;){if(!(o.length>this.maxWebSocketFrameSize))return this.ws.send(o);this.ws.send(o.substring(0,this.maxWebSocketFrameSize)),o=o.substring(this.maxWebSocketFrameSize),"function"==typeof this.debug&&this.debug("remaining = "+o.length)}},n.prototype._setupHeartbeat=function(n){var r,i,s,c,u,a,l;if((u=n.version)===o.VERSIONS.V1_1||u===o.VERSIONS.V1_2)return i=(a=function(){var e,t,r,o;for(o=[],e=0,t=(r=n["heart-beat"].split(",")).length;e<t;e++)c=r[e],o.push(parseInt(c));return o}())[0],r=a[1],0!==this.heartbeat.outgoing&&0!==r&&(s=Math.max(this.heartbeat.outgoing,r),"function"==typeof this.debug&&this.debug("send PING every "+s+"ms"),this.pinger=o.setInterval(s,(l=this,function(){return l.ws.send(e.LF),"function"==typeof l.debug?l.debug(">>> PING"):void 0}))),0!==this.heartbeat.incoming&&0!==i?(s=Math.max(this.heartbeat.incoming,i),"function"==typeof this.debug&&this.debug("check PONG every "+s+"ms"),this.ponger=o.setInterval(s,function(e){return function(){var n;if((n=t()-e.serverActivity)>2*s)return"function"==typeof e.debug&&e.debug("did not receive server activity for the last "+n+"ms"),e.ws.close()}}(this))):void 0},n.prototype._parseConnect=function(){var e,t,n,r;switch(r={},(e=1<=arguments.length?s.call(arguments,0):[]).length){case 2:r=e[0],t=e[1];break;case 3:e[1]instanceof Function?(r=e[0],t=e[1],n=e[2]):(r.login=e[0],r.passcode=e[1],t=e[2]);break;case 4:r.login=e[0],r.passcode=e[1],t=e[2],n=e[3];break;default:r.login=e[0],r.passcode=e[1],t=e[2],n=e[3],r.host=e[4]}return[r,t,n]},n.prototype.connect=function(){var n,i,c,u,a;return n=1<=arguments.length?s.call(arguments,0):[],u=this._parseConnect.apply(this,n),c=u[0],this.connectCallback=u[1],i=u[2],"function"==typeof this.debug&&this.debug("Opening Web Socket..."),this.ws.onmessage=(a=this,function(n){var o,s,c,u,l,d,f,p,h,b,g,m;if(u="undefined"!=typeof ArrayBuffer&&n.data instanceof ArrayBuffer?(o=new Uint8Array(n.data),"function"==typeof a.debug&&a.debug("--- got data length: "+o.length),function(){var e,t,n;for(n=[],e=0,t=o.length;e<t;e++)s=o[e],n.push(String.fromCharCode(s));return n}().join("")):n.data,a.serverActivity=t(),u!==e.LF){for("function"==typeof a.debug&&a.debug("<<< "+u),m=[],h=0,b=(g=r.unmarshall(u)).length;h<b;h++)switch((l=g[h]).command){case"CONNECTED":"function"==typeof a.debug&&a.debug("connected to server "+l.headers.server),a.connected=!0,a._setupHeartbeat(l.headers),m.push("function"==typeof a.connectCallback?a.connectCallback(l):void 0);break;case"MESSAGE":p=l.headers.subscription,(f=a.subscriptions[p]||a.onreceive)?(c=a,d=l.headers["message-id"],l.ack=function(e){return null==e&&(e={}),c.ack(d,p,e)},l.nack=function(e){return null==e&&(e={}),c.nack(d,p,e)},m.push(f(l))):m.push("function"==typeof a.debug?a.debug("Unhandled received MESSAGE: "+l):void 0);break;case"RECEIPT":m.push("function"==typeof a.onreceipt?a.onreceipt(l):void 0);break;case"ERROR":m.push("function"==typeof i?i(l):void 0);break;default:m.push("function"==typeof a.debug?a.debug("Unhandled frame: "+l):void 0)}return m}"function"==typeof a.debug&&a.debug("<<< PONG")}),this.ws.onclose=function(e){return function(){var t;return t="Whoops! Lost connection to "+e.ws.url,"function"==typeof e.debug&&e.debug(t),e._cleanUp(),"function"==typeof i?i(t):void 0}}(this),this.ws.onopen=function(e){return function(){return"function"==typeof e.debug&&e.debug("Web Socket Opened..."),c["accept-version"]=o.VERSIONS.supportedVersions(),c["heart-beat"]=[e.heartbeat.outgoing,e.heartbeat.incoming].join(","),e._transmit("CONNECT",c)}}(this)},n.prototype.disconnect=function(e,t){return null==t&&(t={}),this._transmit("DISCONNECT",t),this.ws.onclose=null,this.ws.close(),this._cleanUp(),"function"==typeof e?e():void 0},n.prototype._cleanUp=function(){if(this.connected=!1,this.pinger&&o.clearInterval(this.pinger),this.ponger)return o.clearInterval(this.ponger)},n.prototype.send=function(e,t,n){return null==t&&(t={}),null==n&&(n=""),t.destination=e,this._transmit("SEND",t,n)},n.prototype.subscribe=function(e,t,n){var r;return null==n&&(n={}),n.id||(n.id="sub-"+this.counter++),n.destination=e,this.subscriptions[n.id]=t,this._transmit("SUBSCRIBE",n),r=this,{id:n.id,unsubscribe:function(){return r.unsubscribe(n.id)}}},n.prototype.unsubscribe=function(e){return delete this.subscriptions[e],this._transmit("UNSUBSCRIBE",{id:e})},n.prototype.begin=function(e){var t,n;return n=e||"tx-"+this.counter++,this._transmit("BEGIN",{transaction:n}),t=this,{id:n,commit:function(){return t.commit(n)},abort:function(){return t.abort(n)}}},n.prototype.commit=function(e){return this._transmit("COMMIT",{transaction:e})},n.prototype.abort=function(e){return this._transmit("ABORT",{transaction:e})},n.prototype.ack=function(e,t,n){return null==n&&(n={}),n["message-id"]=e,n.subscription=t,this._transmit("ACK",n)},n.prototype.nack=function(e,t,n){return null==n&&(n={}),n["message-id"]=e,n.subscription=t,this._transmit("NACK",n)},n}(),o={VERSIONS:{V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.1,1.0"}},client:function(e,t){var r;return null==t&&(t=["v10.stomp","v11.stomp"]),r=new(o.WebSocketClass||WebSocket)(e,t),new n(r)},over:function(e){return new n(e)},Frame:r},null!==t&&(t.Stomp=o),"undefined"!=typeof window&&null!==window?(o.setInterval=function(e,t){return window.setInterval(t,e)},o.clearInterval=function(e){return window.clearInterval(e)},window.Stomp=o):t||(self.Stomp=o)}).call(this)},function(e,t,n){(function(e){var t=n(1);for(k in t)e[k]=t[k]}).call(this,n(4))},function(e,t,n){var r=n(0),o=n(3);e.exports=r.Stomp,e.exports.overTCP=o.overTCP,e.exports.overWS=o.overWS},function(e,t,n){(function(){var e,r,o,i,s,c;e=n(0),r=n(1),e.Stomp.setInterval=function(e,t){return setInterval(t,e)},e.Stomp.clearInterval=function(e){return clearInterval(e)},s=function(e,t){var n,o;return n=null,o={url:"tcp:// "+t+":"+e,send:function(e){return n.write(e)},close:function(){return n.end()}},(n=r.connect(e,t,(function(e){return o.onopen()}))).on("error",(function(e){return"function"==typeof o.onclose?o.onclose(e):void 0})),n.on("close",(function(e){return"function"==typeof o.onclose?o.onclose(e):void 0})),n.on("data",(function(e){var t;return t={data:e.toString()},o.onmessage(t)})),o},c=function(e){var t,r,o,i;return t=n(5).client,r=null,i={url:e,send:function(e){return r.sendUTF(e)},close:function(){return r.close()}},(o=new t).on("connect",(function(e){return r=e,i.onopen(),r.on("error",(function(e){return"function"==typeof i.onclose?i.onclose(e):void 0})),r.on("close",(function(){return"function"==typeof i.onclose?i.onclose():void 0})),r.on("message",(function(e){var t;if("utf8"===e.type)return t={data:e.utf8Data},i.onmessage(t)}))})),o.connect(e),i},o=function(t,n){var r;return r=s(n,t),e.Stomp.over(r)},i=function(t){var n;return n=c(t),e.Stomp.over(n)},t.overTCP=o,t.overWS=i}).call(this)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r;try{r=n(6)}catch(e){}finally{if(r||"undefined"==typeof window||(r=window),!r)throw new Error("Could not determine global this")}var o=r.WebSocket||r.MozWebSocket,i=n(7);function s(e,t){return t?new o(e,t):new o(e)}o&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(s,e,{get:function(){return o[e]}})})),e.exports={w3cwebsocket:o?s:null,version:i}},function(e,t){var n=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}()},function(e,t,n){e.exports=n(8).version},function(e){e.exports=JSON.parse('{"_from":"websocket@latest","_id":"websocket@1.0.31","_inBundle":false,"_integrity":"sha512-VAouplvGKPiKFDTeCCO65vYHsyay8DqoBSlzIO3fayrfOgU94lQN5a1uWVnFrMLceTJw/+fQXR5PGbUVRaHshQ==","_location":"/websocket","_phantomChildren":{},"_requested":{"type":"tag","registry":true,"raw":"websocket@latest","name":"websocket","escapedName":"websocket","rawSpec":"latest","saveSpec":null,"fetchSpec":"latest"},"_requiredBy":["/stompjs"],"_resolved":"https://registry.npmjs.org/websocket/-/websocket-1.0.31.tgz","_shasum":"e5d0f16c3340ed87670e489ecae6144c79358730","_spec":"websocket@latest","_where":"C:\\\\Users\\\\Rishabh Handay\\\\IdeaProjects\\\\modern-js\\\\starter\\\\node_modules\\\\stompjs","author":{"name":"Brian McKelvey","email":"theturtle32@gmail.com","url":"https://github.com/theturtle32"},"browser":"lib/browser.js","bugs":{"url":"https://github.com/theturtle32/WebSocket-Node/issues"},"bundleDependencies":false,"config":{"verbose":false},"contributors":[{"name":"IÃ±aki Baz Castillo","email":"ibc@aliax.net","url":"http://dev.sipdoc.net"}],"dependencies":{"debug":"^2.2.0","es5-ext":"^0.10.50","nan":"^2.14.0","typedarray-to-buffer":"^3.1.5","yaeti":"^0.0.6"},"deprecated":false,"description":"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.","devDependencies":{"buffer-equal":"^1.0.0","faucet":"^0.0.1","gulp":"^4.0.2","gulp-jshint":"^2.0.4","jshint":"^2.0.0","jshint-stylish":"^2.2.1","tape":"^4.9.1"},"directories":{"lib":"./lib"},"engines":{"node":">=0.10.0"},"homepage":"https://github.com/theturtle32/WebSocket-Node","keywords":["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],"license":"Apache-2.0","main":"index","name":"websocket","repository":{"type":"git","url":"git+https://github.com/theturtle32/WebSocket-Node.git"},"scripts":{"gulp":"gulp","install":"(node-gyp rebuild 2> builderror.log) || (exit 0)","test":"faucet test/unit"},"version":"1.0.31"}')},function(e,t,n){"use strict";n.r(t);const r={connectBtn:document.getElementById("connect"),disconnectBtn:document.getElementById("disconnect"),sendBtn:document.getElementById("send-message"),connectUrl:document.getElementById("url"),connectHeaderPlus:document.getElementById("add-connect-header"),messageHeaderPlus:document.getElementById("add-message-header"),subscriptionPlus:document.getElementById("add-sub"),subscription:document.getElementById("subscription"),header:e=>({key:document.getElementById(e+"-header-key"),value:document.getElementById(e+"-header-value")}),frames:document.getElementById("frames"),headerKeyValueById:(e,t)=>({key:document.getElementById(`${e}-header-key-${t}`),value:document.getElementById(`${e}-header-value-${t}`)}),subscriptionById:e=>document.getElementById("subscription-"+e),destination:document.getElementById("destination"),message:document.getElementById("messages"),payload:document.getElementById("payload"),payloadDestination:document.getElementById("payload-destination")};let o=0,i=0,s=0;const c="connect",u="message",a=(e,t)=>{r.header(e).key.insertAdjacentHTML("beforeend",`<input type="text" id="${e}-header-key-${t}" class="form-control" placeholder="Header name"><br>`),r.header(e).value.insertAdjacentHTML("beforeend",`<input type="text" id="${e}-header-value-${t}" class="form-control" placeholder="Value"><br>`)},l=e=>{const t={};for(let n=0;n<(e===c?o:i);n++)""!==r.headerKeyValueById(e,n).key.value.trim()&&(t[r.headerKeyValueById(e,n).key.value.trim()]=r.headerKeyValueById(e,n).value.value.trim());return t},d=e=>{r.connectBtn.disabled=e,r.sendBtn.disabled=!e,r.disconnectBtn.disabled=!e,!0===e&&(r.frames.innerHTML="",r.message.innerHTML="",r.destination.innerHTML="")},f="success",p="danger",h=(e,t)=>{r.frames.insertAdjacentHTML("beforeend",`<tr class="${e}"><td>${t}</td></tr>`)};class b{constructor(e,t){this.url=e,this.connectHeaders=t}}class g{constructor(e){this.subscriptions=e}}class m{constructor(e,t,n){this.destination=e,this.headers=t,this.message=n}}var y=n(2);let v,w,S=new Map;const k=e=>{h(f,e),((e,t)=>{r.message.insertAdjacentHTML("beforeend",`<tr class='success'><td>${e}</td></tr>`),r.destination.insertAdjacentHTML("beforeend",`<tr class='success'><td>${t}</td></tr>`)})(JSON.stringify(JSON.parse(e.body),void 0,4),e.headers.destination)},I=e=>{h(f,e),w.forEach(e=>{const t=v.subscribe(e,k);S.set(e,t)})},E=e=>{d(!1),h(p,e)};r.connectBtn.addEventListener("click",()=>{d(!0);((e,t)=>{try{v=y.client(e.url),w=t.subscriptions,v.connect(e.connectHeaders,I,E)}catch(e){d(!1),h(p,e)}})(new b(r.connectUrl.value.trim(),l(c)),new g((()=>{const e=[];for(let t=0;t<s;t++)""===r.subscriptionById(t).value.trim()||e.push(r.subscriptionById(t).value.trim());return e})()))}),r.connectHeaderPlus.addEventListener("click",()=>{a(c,o++)}),r.messageHeaderPlus.addEventListener("click",()=>{a(u,i++)}),r.subscriptionPlus.addEventListener("click",()=>{r.subscription.insertAdjacentHTML("beforeend",`<input type="text" id="subscription-${s++}" class="form-control" placeholder="Stomp Subscription URL"><br>`)}),r.sendBtn.addEventListener("click",()=>{(e=>{v.send(e.destination,e.headers,e.message)})(new m(r.payloadDestination.value.trim(),l(u),r.payload.value.trim()))}),r.disconnectBtn.addEventListener("click",()=>{d(!1),v.disconnect(()=>{h(f,"DISCONNECTED")})}),window.unsubscribe=e=>{S.get(e).unsubscribe()}}]);